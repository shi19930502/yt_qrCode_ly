{"version":3,"sources":["slide2.js"],"names":["$","swiper","Swiper","pagination","paginationClickable","getAllDataList","loading_num","timer","setInterval","clearInterval","setTimeout","fadeOut","html","getDataList","API_URL","tranId","d","state","aaData","ncqh","renderFarmClimate","renderBaseInfo","ltxx","length","renderXsjlList","data","view","tpl","f_ave_temperature","laytpl","render","count","eles","children","imgs","texts","datas","f_altitude","f_precipitation","eq","addClass","siblings","removeClass","attr","f_image_url","imgsrc","IMG_URL","arr","dataLength","reverse","slice","htmlStr","animateC","animateT","dateText","m","htmlStr_right","htmlStr_left","n","batchId","transId","salermarketName","indate","split","goodsName","height","css","styleStr","h","style","offsetHeight"],"mappings":"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","file":"slide2.js","sourcesContent":["'use strict';\n\n$(function () {\n    // 初始化第二页banner\n    var swiper = new Swiper('.banner-container', {\n        pagination: '.banner-pagination',\n        paginationClickable: true\n    });\n    // 获取所有数据\n    getAllDataList();\n    // loading 百分数进度\n    loading_num();\n});\n// loading 百分数进度\nfunction loading_num() {\n    var loading_num = 0;\n    var timer = setInterval(function () {\n        if (loading_num >= 100) {\n            clearInterval(timer);\n            loading_num = 100;\n            setTimeout(function () {\n                $('.loading').fadeOut(500);\n            }, 1000);\n        } else {\n            loading_num++;\n        }\n        $('#loading_num').html(loading_num + '%');\n    }, 20);\n}\n// 获取数据\nfunction getAllDataList() {\n    getDataList(API_URL + 'importantGood/queryInfoByTranId', {\n        tranId: tranId\n    }, function (d) {\n        if (d && d.state === 0) {\n            if(d.aaData.ncqh[0]){\n            \t// 气候数据\n\t            renderFarmClimate(d.aaData.ncqh[0]);\n\t            // 基地信息\n\t            renderBaseInfo(d.aaData.ncqh[0]);\n            }\n            if(d.aaData.ltxx&&d.aaData.ltxx.length>0){\n            \t// 销售记录\n            \trenderXsjlList(d.aaData.ltxx);\n            }\n            \n        }\n    });\n}\n// 渲染生长环境\nfunction renderFarmClimate(data) {\n    var view = $(\"#farmClimateView\");\n    var tpl = $(\"#farmClimateTpl\").html();\n    $('.climate-data').html(data.f_ave_temperature + '℃');\n    laytpl(tpl).render(data, function (html) {\n        view.html(html);\n        var count = 0;\n        var eles = $('.climate-type').children('div');\n        var imgs = ['imgs/two_icon_wendu.png', 'imgs/two_icon_haiba.png', 'imgs/four_icon_jiangshui.png'];\n        var texts = ['年平均温度', '海拔', '年平均降水量'];\n\n        var datas = [data.f_ave_temperature + '℃', data.f_altitude + 'm', data.f_precipitation + 'ml'];\n        setInterval(function () {\n            count++;\n            if (count >= eles.length) {\n                count = 0;\n            }\n            // 选择样式\n            eles.eq(count).addClass('active').siblings('').removeClass('active');\n            // 图片\n            $('.climate-img>img').attr('src', imgs[count]);\n            // 数据\n            $('.climate-data').html(datas[count]);\n            // 文字\n            $('#climate-text').html(texts[count]);\n        }, 2500);\n    });\n}\n// 渲染基地信息\nfunction renderBaseInfo(data) {\n\tif(data.f_image_url){\n\t\tvar imgsrc = IMG_URL + data.f_image_url;\n\t}else{\n\t\t//当上面的为空的时候，就默认这个为基地图片\n\t\tvar imgsrc = 'imgs/img_moren.png';\n\t}\n    \n    $(\"#jdimg>img\").attr('src', imgsrc);\n    var view = $(\"#baseinfoView\");\n    var tpl = $(\"#baseinfoTpl\").html();\n    laytpl(tpl).render(data, function (html) {\n        view.html(html);\n    });\n}\n// 渲染第四页销售记录\nfunction renderXsjlList(data) {\n\tvar arr=['one','two','three','four','five','six','seven','eight','nine','ten',]\n\tvar dataLength=data.length;\r\n//  console.log(data)\n    var view = $(\"#salerecordView\");\n    var tpl = $(\"#salerecordTpl\").html();\n    data.reverse();//颠倒\n//\tarr.reverse();\n\tarr=arr.slice(0,dataLength).reverse();\n    var htmlStr='';\n    var animateC=1;\n    var animateT=1.4;\n    var dateText=''\r\n    for(var m=0;m<data.length;m++){\r\n\t\tvar htmlStr_right='';\n\t\tvar htmlStr_left='';\n\t\tif(m%2==0){\n\t\t\tdateText='采收时间：'\n\t\t}else{\n\t\t\tdateText='进场日期：'\n\t\t}\n\t\tif(m>=1){\n\t    \tfor(var n=1;n<2;n++){\n\t    \t\thtmlStr_left='<li>'\n\t\t    \t\t+'<span class=\"yellow_spot ani\" swiper-animate-effect=\"bounceInDown\" swiper-animate-duration=\"1s\" swiper-animate-delay='+animateC+'s></span>'\n\t\t    \t\t+'<div class=\"text ani\" swiper-animate-effect=\"bounceInLeft\" swiper-animate-duration=\"1s\" swiper-animate-delay='+animateT+'s>'\n\t\t    \t\t+'<p>批次号</p>'\n\t\t    \t\t+'<p class=\"span\">'+data[m][arr[m]].batchId+'</p>'\n\t\t    \t\t+'<p>交易凭证号</p>'\n\t\t    \t\t+'<p class=\"span\">'+data[m][arr[m]].transId+'</p>'\n\t\t    \t\t+'</div>'\n\t\t    \t\t+'</li>'\n\t\t    \tanimateC=animateC+0.8\n\t    \t\tanimateT=animateT+0.8\n\t    \t}\n\t    }\r\n    \thtmlStr_right='<li>'\r\n\t    \t+'<span class=\"yellow_spot ani\" swiper-animate-effect=\"bounceInDown\" swiper-animate-duration=\"1s\" swiper-animate-delay='+animateC+'s></span>'\r\n\t        +'<div class=\"text ani\" swiper-animate-effect=\"bounceInRight\" swiper-animate-duration=\"1s\" swiper-animate-delay='+animateT+'s>'\r\n\t        +'<p>'+data[m][arr[m]].salermarketName+'</p>'\r\n\t        +'<p>'+dateText+data[m][arr[m]].indate.split(' ')[0]+'</p>'\r\n\t        +'</div>'\r\n\t        +'</li>'\r\n\t    \n\t    animateC=animateC+0.8\n\t    animateT=animateT+0.8\r\n    \thtmlStr=htmlStr + htmlStr_left+htmlStr_right  ;\r\n   }\n    view.html(htmlStr);\n    data[0][arr[0]].goodsName?$('#ltxxgoodsName').html(data[0][arr[0]].goodsName):$('#ltxxgoodsName').html('goodsName为空')\r\n    var height = 6 / view.children().length;\n    view.children().css({\r\n        height: height + 'rem'\n    });\n    var styleStr='top:0;bottom:0;margin:auto;height:';\n    for(var h=0;h<$('#salerecordView li .text').length;h++){\n    \t$('#salerecordView li .text')[h].style=styleStr+$('#salerecordView li .text')[h].offsetHeight+'px'\n    }\n    \n//  laytpl(tpl).render(data[dataLength-1][arr[dataLength-1]], function (html) {\r\n//      $('#ltxxgoodsName').html(data[1][arr[dataLength-1]].goodsName);\r\n//      // 动态设置li的高度平均布局\r\n//      view.html(html);\r\n//      var height = 6 / view.children().length;\r\n//      view.children().css({\r\n//          height: height + 'rem'\r\n//      });\r\n//  });\n}\n//# sourceMappingURL=slide2.js.map"]}